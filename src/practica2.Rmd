---
title: 'Práctica 2: Limpieza y análisis de datos'
author: "Miguel Santos Pérez  y Alejandro Arzola García"
date: "17 de junio de 2020"
knit: (function(inputFile, encoding) {
  rmarkdown::render(inputFile, encoding = encoding, output_dir = "../pdf") })
output:
  pdf_document:
    number_sections: yes
    toc: yes
    toc_depth: '2'
  html_document:
    df_print: paged
    toc: yes
    toc_depth: '2'
subtitle: UOC - Tipología y ciclo de vida de los datos
toc-title: Índice
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

\newpage
# Descripción del dataset

En la Práctica 1 de la asginatura de _Tipología y ciclo de vida de los datos_ se creó un proceso _web scraping_ en el que se obtuvieron los datos relacionados a todos los partidos y las estadísticas individuales de todos los jugadores de la actual temporada (2019-2020) de la [\textcolor{blue}{Euroliga}](https://www.euroleague.net/), la máxima competición de clubes de baloncesto de Europa. 

El objetivo final era contribuir al aumento de explotación de los datos para los equipos europeos y tratar de igualar lo que se realiza en América con las poderosas franquicias de [\textcolor{blue}{NBA}](https://es.nba.com/?gr=www).

Mediante el proceso de obtención de datos realizado en _Python_ que comentamos anteriormente, conseguimos crear dos datasets: el primero contiene los datos generales de un partido (nombre de los equipos, puntuación de cada equipo, fecha y hora del partido) y el segundo contiene más de quince estadísticas individuales para cada jugador por cada partido (puntos, minutos, rebotes, asistencias, ...). Este trabajo está disponible en un repositorio de _GitHub_ al que se puede acceder haciendo click [\textcolor{blue}{aquí}](https://github.com/aarzola-uoc/practica1-tycvd).

Para esta segunda práctica queremos seguir progresando para lograr este objetivo y por ello vamos a utilizar los datasets que hemos mencionado para realizar un análisis estadístico.

Los datasets y el código utilizado para generar el análisis estadístico que se desarrolla a continuación está disponible en el siguiente repositorio de _GitHub_:

* \textcolor{blue}{https://github.com/aarzola-uoc/practica2-tycvd}

****
# Integración y selección de los datos de interés a analizar

Tras realizar un análisis en profundidad de los dos datasets de los que disponemos, hemos tomado la decisión de utilizar únicamente el que contiene las estadísticas individuales por partido de cada jugador. 

Los datos relevantes del primer dataset son exclusivamente los nombres de los equipos y el marcador. Sin embargo, estos datos son posibles calcularlos a partir del segundo dataset, incluso aumentar los datos de equipo ya que son la suma de las estadísticas de todos los jugadores para cada partido.

En base a esto, hemos decidido que se creará un nuevo dataset utilizando código R, a partir del dataset de estadísticas de los jugadores, que tendrá las estadísticas de cada equipo por partido (suma de cada jugador es el total del equipo).

Además vamos a calcular una serie de estadísticos muy interesantes y que permiten un análisis mucho más técnico y útli para los equipos. Estos estadísticos son.....
**FALTA POR HACER (Miguel): definición de estadísticos**

## Carga de datos originales

El primer paso que tenemos que realizar es cargar el fichero csv _euroleague_stats_per_game.csv_ que contiene el dataset con los datos individuales por partido:
```{r,eval=TRUE,echo=TRUE}
data <- read.csv2('../csv/euroleague_stats_per_game.csv')
```
Hemos utilizado la función `read.csv2` ya que el fichero a cargar está en formato _csv_ español, es decir, los separadores son el caracter `;`.

Mostramos los primeros registros del dataset para verificar que los datos se han cargado correctamente:
```{r,eval=TRUE,echo=TRUE}
head(data)
```

Mostramos el número de registros transmitidos:
```{r,eval=TRUE,echo=TRUE}
nrow(data)
```

****
# Limpieza de los datos

El dataset dispone de `r nrow(data)` registros y `r ncol(data)` variables. Estas variables son:

* **MatchId:** identificador único de partido.
* **Team:** equipo al que pertenece el jugador.
* **PlayerNumber:** número del jugador.
* **PlayerName:** nombre del jugador.
* **Min:** minutos jugados.
* **Pts:** puntos anotados.
* **2FG:** tiros de dos (metidos-anotados).
* **3FG:** tiros de tres (metidos-anotados).
* **FT:** tiros libres (metidos-anotados).
* **O:** rebotes ofensivos.
* **D:** rebotes defensivos.
* **T:** rebotes totales.
* **As:** asistencias.
* **St:** recuperaciones.
* **To:** pérdidas.
* **Fv:** tapones a favor.
* **Ag:** tapones en contra.
* **Cm:** faltas cometidas.
* **Rv:** faltas recibidas.
* **PIR:** valoración del jugador.

En total disponemos de estadísticas de `r length(table(data$MatchId))` partidos y de `r length(table(data$PlayerName))` jugadores diferentes. 

## Tratamiento de datos
## Elementos vacíos
## Identificación y tratamiento de valores extremos

****
# Análisis de los datos

FALTA POR HACER

## Selección de los grupos de datos que se quieren analizar/comparar
## Comprobación de la normalidad y homogeneidad de la varianza
## Pruebas estadísticas para comparar los grupos de datos
### Contraste de hipótesis
### Correlaciones
### Regresiones

****
# Exportación de datos finales

A continuación vamos a exportar nuestro _dataframe_ final a un archivo csv. Este archivo se llamará _euroleague_stats_per_game_clean.csv_. Utilizamos la función `write.csv2()` para exportar el fichero en formato _csv_ español:
```{r,eval=TRUE,echo=TRUE}
write.csv2(data, row.names = FALSE, file = "../csv/euroleague_stats_per_game_clean.csv")
```

Este nuevo dataset también está disponible en el repositorio de _GitHub_ mencionado en el primer apartado de este documento.

****
# Representación de los resultados a partir de tablas y gráficas

FALTA POR HACER

****
# Resolución del problema

FALTA POR HACER

****
# Contribuciones al trabajo

**Contribuciones**              |  **Firma**                    | 
--------------------------------|:-----------------------------:|
Selección del dataset           | MSP, AAG
Creación del repositorio GitHub | MSP, AAG
Desarrollo código en R          | MSP, AAG
Redacción de las respuestas     | MSP, AAG